$(function(){$("table").each(function(){if(0<$(this).find("thead").length&&0<$(this).find("th").length){var i=$(window),s=$(this),t=s.find("thead").clone(),e=s.find("thead, tbody").clone();s.addClass("sticky-enabled").css({margin:0,width:"100%"}).wrap('<div class="sticky-wrap" />'),s.hasClass("overflow-y")&&s.removeClass("overflow-y").parent().addClass("overflow-y"),s.after('<table class="sticky-thead" />'),0<s.find("tbody th").length&&s.after('<table class="sticky-col" /><table class="sticky-intersect" />');var h=$(this).siblings(".sticky-thead"),d=$(this).siblings(".sticky-col"),o=$(this).siblings(".sticky-intersect"),a=$(this).parent(".sticky-wrap");h.append(t),d.append(e).find("thead th:gt(0)").remove().end().find("tbody td").remove(),o.html("<thead><tr><th>"+s.find("thead th:first-child").html()+"</th></tr></thead>");function c(){s.find("thead th").each(function(t){h.find("th").eq(t).width($(this).width())}).end().find("tr").each(function(t){d.find("tr").eq(t).height($(this).height())}),h.width(s.width()),d.find("th").add(o.find("th")).width(s.find("thead th").width())}function n(){var t=f();s.height()>a.height()?0<a.scrollTop()?h.add(o).css({opacity:1,top:a.scrollTop()}):h.add(o).css({opacity:0,top:0}):i.scrollTop()>s.offset().top&&i.scrollTop()<s.offset().top+s.outerHeight()-t?h.add(o).css({opacity:1,top:i.scrollTop()-s.offset().top}):h.add(o).css({opacity:0,top:0})}function l(){0<a.scrollLeft()?d.add(o).css({opacity:1,left:a.scrollLeft()}):d.css({opacity:0}).add(o).css({left:0})}var f=function(){var t=0;return s.find("tbody tr:lt(3)").each(function(){t+=$(this).height()}),t>.25*i.height()&&(t=.25*i.height()),t+=h.height()};c(),s.parent(".sticky-wrap").scroll($.throttle(250,function(){n(),l()})),i.load(c).resize($.debounce(250,function(){c(),n(),l()})).scroll($.throttle(250,n))}})});